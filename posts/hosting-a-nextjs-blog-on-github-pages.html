<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Articles about Swift, Laravel and other awesome technologies."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Hosting a NextJS blog on Github Pages | A Swift Blog</title><meta property="og:image" content="/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover.png"/><meta name="date" content="2021-05-06T19:51:00.322Z"/><meta name="twitter:card" content="summary"/><meta property="og:title" content="Hosting a NextJS blog on Github Pages"/><meta property="og:description" content="Create a statically generated blog with NextJS, Github Actions and Github Pages. Did I mention it&#x27;ll be 100% free? üòè"/><meta name="next-head-count" content="20"/><link rel="preload" href="/_next/static/css/1b23478ed0ab4c979668.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1b23478ed0ab4c979668.css" data-n-g=""/><link rel="preload" href="/_next/static/css/7310806dbed7392e7bbe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7310806dbed7392e7bbe.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.87599f097ee29829183b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-16077ccfe5cc6973aa9b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-dce818425be07bbbbb0a.js" as="script"/><link rel="preload" href="/_next/static/chunks/bc82bb883724fe5faad984d18f20974d5cb6d361.074e01d997f01da533d8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-3279fb051887e467b7be.js" as="script"/></head><body class="dark:bg-black dark:text-gray-100"><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">A Swift <span class="text-blue-600">Blog</span></a>.</h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-6 text-center md:text-left">Hosting a NextJS blog on Github Pages</h1><div class="flex justify-start items-center mb-8"><span class="text-gray-100 dark:text-white bg-green-400 rounded py-1 px-3 mr-3 font-bold cursor-pointer">meta</span></div><div class="mb-8 md:mb-16 sm:mx-0"><div class="sm:mx-0"><div class="shadow-small"><picture><source srcSet="/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover-dark.png" media="(prefers-color-scheme: dark)"/><img src="/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover.png" alt="Cover Image for Hosting a NextJS blog on Github Pages"/></picture></div></div></div><div class="max-w-2xl mx-auto"><div class="mb-6 text-lg"><time dateTime="2021-05-06T19:51:00.322Z">May	6, 2021</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><p>It was a task I'd been putting off for years: Getting my own blog up and running. I had been blogging on Medium, but I wanted more control. I decided to kill two (or actually, three?) birds with one stone: host my own blog, learn the basics of React, and see what NextJS is all about. If you're reading this, it means all three of those worked out üòâ But that doesn't mean it was without hurdles.</p>
<p>In this article I'll describe steps you can follow if you want to host a statically generated blog on Github Pages. A nice little bonus: this will be <strong>100% free</strong>. We'll go over the following:</p>
<ul>
<li>Checking out a Markdown powered NextJS blog template</li>
<li>Export static HTML with NextJS and Github Actions</li>
<li>Setting up Github Pages correctly</li>
<li>How to resolve any issues that come up</li>
</ul>
<h3>Getting started</h3>
<p>Let's start with checking out the blog template and finding our way around it. For this tutorial we'll use the <code>blog-starter-typescript</code> template from the official NextJS repository. You can read more about it <a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript">here</a>. To use that as a template, run the following command in your terminal:</p>
<pre><code>npx create-next-app --example blog-starter-typescript &#x3C;app name here>
</code></pre>
<p>After that has finished running, open the newly created directory in your code editor of choice. This is a completely functional NextJS application, but for this tutorial we'll only concern ourselves with the following directories:</p>
<ul>
<li><code>_posts</code>: This is where you'll find the posts that are shown on the blog.</li>
<li><code>public/assets</code>: This is where you add images that can be used on your blog.</li>
</ul>
<blockquote>
<p>Note: you'll see there is currently a convention to create new folders in <code>public/assets/blog/</code> for each article you create, but you're free to do whatever you like. Anything in the <code>public</code> folder will be accessible by their path, relative to the <code>public</code> folder, e.g. <code>assets/blog/preview/cover.jpg</code>.</p>
</blockquote>
<p>Run a quick <code>npm run dev</code> in the terminal, go to <a href="http://localhost:3000/">http://localhost:3000/</a> and tada üéâ There's your blog! Though I'll admit, it looks eerily similar to this one... You might want to change the styling a bit üò¨</p>
<p>Currently you're serving this blog through a webserver that is run locally on your device. While this opens up a lot of possibilities (dynamic content, server-side rendering), this is not what we need! To serve our blog on Github Pages we need a <em>statically generated</em> website. Good thing there's this thing called</p>
<h3>Static HTML export</h3>
<p>This is a way to export our project to static HTML (üòù), which can be run without a Node.js server. That's exactly what we need! Open the <code>package.json</code> file in your blog project, and add the following entry to the <code>"scripts"</code> object:</p>
<pre><code class="hljs language-json"><span class="hljs-string">"static-export"</span>: <span class="hljs-string">"next build &#x26;&#x26; next export"</span></code></pre>
<p>Now you can run <code>npm run static-export</code> to create a static export of your blog!</p>
<blockquote>
<p>Note: If you run into an issue stating <code>Could not find a declaration file for module 'classnames'.</code>, create a file called <code>classnames.d.ts</code> in the <code>@types</code> directory. All you need to add to the file is <code>declare module 'classnames'</code>, and that should get the project to build.</p>
</blockquote>
<p>Succesfully running the script we just created will result in an <code>out</code> directory containing the static export of your blog being created. While that's great, our aim is a bit further than just a folder on our computer. Also, if you take a quick look at your <code>.gitignore</code> file, you'll see that the <code>out</code> directory is explicitly ignored. This is simply because it's customary to not check build artifacts into source control. But we don't need that! </p>
<h3>Publish your blog with Github Actions and Github Pages</h3>
<p>Github has this really cool feature called <a href="https://github.com/features/actions">Github Actions</a>. This can help us automate the static code generation whenever we push code to our repository. First, create a new folder in your project called <code>.github</code>. Inside, create a second folder called <code>workflows</code>. Inside the <code>workflows</code> folder, create a file called <code>build-and-deploy.yml</code> with the following contents:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">and</span> <span class="hljs-string">Deploy</span>
<span class="hljs-attr">on:</span> 
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build-and-deploy:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">üõéÔ∏è</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2.3.1</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">and</span> <span class="hljs-string">Build</span> <span class="hljs-string">üîß</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          npm ci
          npm run static-export
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">üöÄ</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">JamesIves/github-pages-deploy-action@4.1.1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">branch:</span> <span class="hljs-string">gh-pages</span>
          <span class="hljs-attr">folder:</span> <span class="hljs-string">out</span></code></pre>
<p>We're using the <a href="https://github.com/JamesIves/github-pages-deploy-action">Github Pages Deploy Action</a> written by <a href="https://jamesiv.es/">James Ives</a> to upload the build output (can you spot the mention to the <code>out</code> folder in this snippet?) to a separate branch, which we will use to serve our Github Pages site.</p>
<p>Now we need to do a few things:</p>
<ul>
<li>Set up a Github repository</li>
<li>Push your code to the repository (make sure to include the <code>package-lock.json</code> file)</li>
<li>Open <a href="https://github.com/github-name/repository-name/actions">https://github.com/github-name/repository-name/actions</a> and you should see that it's running the action we just created! Neat! Wait for it to complete.</li>
</ul>
<p>Once the Action has completed, you should see a new branch in your repository called <code>gh-pages</code>. We will use this branch for our site:</p>
<ul>
<li>Go to <a href="https://github.com/github-name/repository-name/settings/pages">https://github.com/github-name/repository-name/settings/pages</a></li>
<li>Select the <code>gh-pages</code> branch as the source and press "Save"</li>
<li>If you want to use a custom domain, follow the steps outlined <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">here</a>.</li>
</ul>
<p>If you did not use a custom domain, your site should soon be live on <a href="https://github-name.github.io">https://github-name.github.io</a>. If you already have other Github Pages you can find it at <a href="https://github-name.github.io/repository-name">https://github-name.github.io/repository-name</a>.</p>
<p>If you visit your site you'll see there are some issues with the styling... Let's deliver on the final part of the promise and</p>
<h3>Fix all issues that come up</h3>
<p>This first issue is pretty simple to fix, but let's take a step back to look at what causes this weird absence of styling. If you use "Inspect Element" on your website, and select the <em>Console</em> tab, you'll be greeted with a bunch of error messages and warnings, including <code>Loading failed for the &#x3C;script> with source &#x3C;your domain>/_next/static/chunks/commons-5bbe2ea0fe711055318e.js</code>. This is caused by a feature of <a href="https://jekyllrb.com/">Jekyll</a> (another tool to create static blogs which is supported out of the box by Github Pages). Directories that start with an underscore are treated differently from other directories, and that is exactly what's happening with the <code>_next</code> directory you see in the path in the error message. Luckily there is a way to disable this behavior. Open the <code>build-and-deploy.yml</code> file we created earlier, and modify the step called <code>Install and Build üîß</code> to look like this:</p>
<pre><code class="hljs language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">and</span> <span class="hljs-string">Build</span> <span class="hljs-string">üîß</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">|
    npm ci
    npm run static-export
    cd out &#x26;&#x26; touch .nojekyll</span></code></pre>
<p>Once you commit that and wait for the Github Action to complete, your blog should look a lot better!</p>
<blockquote>
<p>Note: If you already have a different github pages site, you need to make sure the styles and scripts are served with a base path. You can read more about doing so <a href="https://nextjs.org/docs/api-reference/next.config.js/basepath">here</a>. The base path you need to set is the same as your repository name. That page also mentions what you need to do to get images to work.</p>
</blockquote>
<h3>Afterword</h3>
<p>And that's it! Your blog is now live, for the world to see. Completely driven by your Git repository and some Github Action magic ‚ú®</p>
<p>There are a few other things I ran into while building this blog, like adding tags to articles and <a href="https://tailwindcss.com/docs/optimizing-for-production#writing-purgeable-html">making sure dynamically applied TailwindCSS classes do not get stripped out by PurgeCSS</a>, but I won't dive into that now. If you do run into issues, please reach out!</p>
</div></div></article></div></main></div><footer class="bg-accent-1  dark:bg-black border-t border-accent-2 dark:border-gray-800"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">Written by <a class="text-blue-400 hover:underline" href="https://www.twitter.com/Jillevd_W">Jille</a>.</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Hosting a NextJS blog on Github Pages","date":"2021-05-06T19:51:00.322Z","tags":["meta"],"slug":"hosting-a-nextjs-blog-on-github-pages","author":{"name":"Jille van der Weerd","picture":"/assets/blog/authors/jj.jpeg"},"content":"\u003cp\u003eIt was a task I'd been putting off for years: Getting my own blog up and running. I had been blogging on Medium, but I wanted more control. I decided to kill two (or actually, three?) birds with one stone: host my own blog, learn the basics of React, and see what NextJS is all about. If you're reading this, it means all three of those worked out üòâ But that doesn't mean it was without hurdles.\u003c/p\u003e\n\u003cp\u003eIn this article I'll describe steps you can follow if you want to host a statically generated blog on Github Pages. A nice little bonus: this will be \u003cstrong\u003e100% free\u003c/strong\u003e. We'll go over the following:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eChecking out a Markdown powered NextJS blog template\u003c/li\u003e\n\u003cli\u003eExport static HTML with NextJS and Github Actions\u003c/li\u003e\n\u003cli\u003eSetting up Github Pages correctly\u003c/li\u003e\n\u003cli\u003eHow to resolve any issues that come up\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eGetting started\u003c/h3\u003e\n\u003cp\u003eLet's start with checking out the blog template and finding our way around it. For this tutorial we'll use the \u003ccode\u003eblog-starter-typescript\u003c/code\u003e template from the official NextJS repository. You can read more about it \u003ca href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter-typescript\"\u003ehere\u003c/a\u003e. To use that as a template, run the following command in your terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpx create-next-app --example blog-starter-typescript \u0026#x3C;app name here\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter that has finished running, open the newly created directory in your code editor of choice. This is a completely functional NextJS application, but for this tutorial we'll only concern ourselves with the following directories:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e_posts\u003c/code\u003e: This is where you'll find the posts that are shown on the blog.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epublic/assets\u003c/code\u003e: This is where you add images that can be used on your blog.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNote: you'll see there is currently a convention to create new folders in \u003ccode\u003epublic/assets/blog/\u003c/code\u003e for each article you create, but you're free to do whatever you like. Anything in the \u003ccode\u003epublic\u003c/code\u003e folder will be accessible by their path, relative to the \u003ccode\u003epublic\u003c/code\u003e folder, e.g. \u003ccode\u003eassets/blog/preview/cover.jpg\u003c/code\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eRun a quick \u003ccode\u003enpm run dev\u003c/code\u003e in the terminal, go to \u003ca href=\"http://localhost:3000/\"\u003ehttp://localhost:3000/\u003c/a\u003e and tada üéâ There's your blog! Though I'll admit, it looks eerily similar to this one... You might want to change the styling a bit üò¨\u003c/p\u003e\n\u003cp\u003eCurrently you're serving this blog through a webserver that is run locally on your device. While this opens up a lot of possibilities (dynamic content, server-side rendering), this is not what we need! To serve our blog on Github Pages we need a \u003cem\u003estatically generated\u003c/em\u003e website. Good thing there's this thing called\u003c/p\u003e\n\u003ch3\u003eStatic HTML export\u003c/h3\u003e\n\u003cp\u003eThis is a way to export our project to static HTML (üòù), which can be run without a Node.js server. That's exactly what we need! Open the \u003ccode\u003epackage.json\u003c/code\u003e file in your blog project, and add the following entry to the \u003ccode\u003e\"scripts\"\u003c/code\u003e object:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-string\"\u003e\"static-export\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"next build \u0026#x26;\u0026#x26; next export\"\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow you can run \u003ccode\u003enpm run static-export\u003c/code\u003e to create a static export of your blog!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNote: If you run into an issue stating \u003ccode\u003eCould not find a declaration file for module 'classnames'.\u003c/code\u003e, create a file called \u003ccode\u003eclassnames.d.ts\u003c/code\u003e in the \u003ccode\u003e@types\u003c/code\u003e directory. All you need to add to the file is \u003ccode\u003edeclare module 'classnames'\u003c/code\u003e, and that should get the project to build.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSuccesfully running the script we just created will result in an \u003ccode\u003eout\u003c/code\u003e directory containing the static export of your blog being created. While that's great, our aim is a bit further than just a folder on our computer. Also, if you take a quick look at your \u003ccode\u003e.gitignore\u003c/code\u003e file, you'll see that the \u003ccode\u003eout\u003c/code\u003e directory is explicitly ignored. This is simply because it's customary to not check build artifacts into source control. But we don't need that! \u003c/p\u003e\n\u003ch3\u003ePublish your blog with Github Actions and Github Pages\u003c/h3\u003e\n\u003cp\u003eGithub has this really cool feature called \u003ca href=\"https://github.com/features/actions\"\u003eGithub Actions\u003c/a\u003e. This can help us automate the static code generation whenever we push code to our repository. First, create a new folder in your project called \u003ccode\u003e.github\u003c/code\u003e. Inside, create a second folder called \u003ccode\u003eworkflows\u003c/code\u003e. Inside the \u003ccode\u003eworkflows\u003c/code\u003e folder, create a file called \u003ccode\u003ebuild-and-deploy.yml\u003c/code\u003e with the following contents:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDeploy\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eon:\u003c/span\u003e \n  \u003cspan class=\"hljs-attr\"\u003epush:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ebranches:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emain\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ejobs:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebuild-and-deploy:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eruns-on:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eubuntu-latest\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esteps:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eCheckout\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüõéÔ∏è\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/checkout@v2.3.1\u003c/span\u003e\n\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eInstall\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüîß\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n          npm ci\n          npm run static-export\n\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDeploy\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüöÄ\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eJamesIves/github-pages-deploy-action@4.1.1\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003ebranch:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003egh-pages\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003efolder:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eout\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe're using the \u003ca href=\"https://github.com/JamesIves/github-pages-deploy-action\"\u003eGithub Pages Deploy Action\u003c/a\u003e written by \u003ca href=\"https://jamesiv.es/\"\u003eJames Ives\u003c/a\u003e to upload the build output (can you spot the mention to the \u003ccode\u003eout\u003c/code\u003e folder in this snippet?) to a separate branch, which we will use to serve our Github Pages site.\u003c/p\u003e\n\u003cp\u003eNow we need to do a few things:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSet up a Github repository\u003c/li\u003e\n\u003cli\u003ePush your code to the repository (make sure to include the \u003ccode\u003epackage-lock.json\u003c/code\u003e file)\u003c/li\u003e\n\u003cli\u003eOpen \u003ca href=\"https://github.com/github-name/repository-name/actions\"\u003ehttps://github.com/github-name/repository-name/actions\u003c/a\u003e and you should see that it's running the action we just created! Neat! Wait for it to complete.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOnce the Action has completed, you should see a new branch in your repository called \u003ccode\u003egh-pages\u003c/code\u003e. We will use this branch for our site:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGo to \u003ca href=\"https://github.com/github-name/repository-name/settings/pages\"\u003ehttps://github.com/github-name/repository-name/settings/pages\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eSelect the \u003ccode\u003egh-pages\u003c/code\u003e branch as the source and press \"Save\"\u003c/li\u003e\n\u003cli\u003eIf you want to use a custom domain, follow the steps outlined \u003ca href=\"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site\"\u003ehere\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf you did not use a custom domain, your site should soon be live on \u003ca href=\"https://github-name.github.io\"\u003ehttps://github-name.github.io\u003c/a\u003e. If you already have other Github Pages you can find it at \u003ca href=\"https://github-name.github.io/repository-name\"\u003ehttps://github-name.github.io/repository-name\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIf you visit your site you'll see there are some issues with the styling... Let's deliver on the final part of the promise and\u003c/p\u003e\n\u003ch3\u003eFix all issues that come up\u003c/h3\u003e\n\u003cp\u003eThis first issue is pretty simple to fix, but let's take a step back to look at what causes this weird absence of styling. If you use \"Inspect Element\" on your website, and select the \u003cem\u003eConsole\u003c/em\u003e tab, you'll be greeted with a bunch of error messages and warnings, including \u003ccode\u003eLoading failed for the \u0026#x3C;script\u003e with source \u0026#x3C;your domain\u003e/_next/static/chunks/commons-5bbe2ea0fe711055318e.js\u003c/code\u003e. This is caused by a feature of \u003ca href=\"https://jekyllrb.com/\"\u003eJekyll\u003c/a\u003e (another tool to create static blogs which is supported out of the box by Github Pages). Directories that start with an underscore are treated differently from other directories, and that is exactly what's happening with the \u003ccode\u003e_next\u003c/code\u003e directory you see in the path in the error message. Luckily there is a way to disable this behavior. Open the \u003ccode\u003ebuild-and-deploy.yml\u003c/code\u003e file we created earlier, and modify the step called \u003ccode\u003eInstall and Build üîß\u003c/code\u003e to look like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eInstall\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eand\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüîß\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e|\n    npm ci\n    npm run static-export\n    cd out \u0026#x26;\u0026#x26; touch .nojekyll\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOnce you commit that and wait for the Github Action to complete, your blog should look a lot better!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNote: If you already have a different github pages site, you need to make sure the styles and scripts are served with a base path. You can read more about doing so \u003ca href=\"https://nextjs.org/docs/api-reference/next.config.js/basepath\"\u003ehere\u003c/a\u003e. The base path you need to set is the same as your repository name. That page also mentions what you need to do to get images to work.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3\u003eAfterword\u003c/h3\u003e\n\u003cp\u003eAnd that's it! Your blog is now live, for the world to see. Completely driven by your Git repository and some Github Action magic ‚ú®\u003c/p\u003e\n\u003cp\u003eThere are a few other things I ran into while building this blog, like adding tags to articles and \u003ca href=\"https://tailwindcss.com/docs/optimizing-for-production#writing-purgeable-html\"\u003emaking sure dynamically applied TailwindCSS classes do not get stripped out by PurgeCSS\u003c/a\u003e, but I won't dive into that now. If you do run into issues, please reach out!\u003c/p\u003e\n","excerpt":"Create a statically generated blog with NextJS, Github Actions and Github Pages. Did I mention it'll be 100% free? üòè","ogImage":{"url":"/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover.png"},"coverImage":"/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover.png","darkCoverImage":"/assets/blog/hosting-a-nextjs-blog-on-github-pages/cover-dark.png"},"morePosts":[],"headerColor":"text-blue-600"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"hosting-a-nextjs-blog-on-github-pages"},"buildId":"MaQE22NHIxJDjwKNmSQ3K","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-144e5fa6fafab6397d9c.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.d2ae4074d0a54d95f68e.js" async=""></script><script src="/_next/static/chunks/commons.87599f097ee29829183b.js" async=""></script><script src="/_next/static/chunks/main-16077ccfe5cc6973aa9b.js" async=""></script><script src="/_next/static/chunks/pages/_app-dce818425be07bbbbb0a.js" async=""></script><script src="/_next/static/chunks/bc82bb883724fe5faad984d18f20974d5cb6d361.074e01d997f01da533d8.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-3279fb051887e467b7be.js" async=""></script><script src="/_next/static/MaQE22NHIxJDjwKNmSQ3K/_buildManifest.js" async=""></script><script src="/_next/static/MaQE22NHIxJDjwKNmSQ3K/_ssgManifest.js" async=""></script></body></html>